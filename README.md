# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами



## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание классов
```
Класс EventEmitter обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события
```
```
Класс Model представляет базовую модель, которая используется для создания других моделей в приложении. 
```
```
Класс Component представляет базовый компонент, который используется для создания других компонентов в приложении. Он содержит методы для работы с DOM элементами, такие как установка текстового содержимого, переключение классов, управление статусом блокировки элемента, скрытие и отображение элементов, установка изображения с альтернативным текстом и т.д. Метод render позволяет отрисовать компонент на основе переданных данных и вернуть корневой DOM-элемент компонента
```
```
Класс Api представляет собой обертку для работы с API запросами. Он содержит методы для выполнения GET и POST запросов к указанному URL, используя fetch API.
```
```
Класс Basket представляет собой компонент интерфейса корзины товаров. Он наследуется от базового класса Component и имеет сеттеры для элементов корзины: общей суммы (total), кнопки оформления заказа (зависит от длины массива items с товарами корзины), товаров в корзине (items).
```
```
Класс Form отвечает за отображение формы, управление её состоянием (валидностью, ошибками) и взаимодействие с другими компонентами через события.
В данном классе есть обработчики событий input и submit. При изменении значения в любом поле формы срабатывает обработчик onInputChange, который эмитирует событие с измененным значением поля. При отправке формы эмитируется событие submit.
Свойство valid управляет доступностью кнопки отправки в зависимости от валидности формы. Если форма валидна, то кнопка становится активной. В противном случае кнопка становится неактивной.
Свойство errors устанавливает текст ошибки и отображает его в интерфейсе.
```
```
Класс Modal представляет собой компонент модального окна, который также наследуется от базового класса Component. Он имеет сеттер для переданного контента, методы для открытия/закрытия и ренедера компонента. Также навешаны слушатели на клики по кнопке закрытия, по модалке и вне. Закрытие и открытие происходит путем эмитации события (.emit('modal:close') и .emit('modal:open'))
```
Класс Success представляет собой компонент, который отображает сообщение об успешной операции (оплате) и имеет кнопку закрытия. имеет сеттер, который позволяет установить текст в сообщениие об успешной оплате
```
Класс LotItem используется для создания объектов товаров с заданными свойствами, содержит свойства, описывающие отдельный товар (лот), такие как about, description, id, image, title, price, status и category.

Класс AppState представляет центральное хранилище данных приложения и содержит логику для работы с этими данными. Содержит свойства, описывающие состояние приложения, такие как список товаров в корзине (basket), список товаров в каталоге (catalog), флаг загрузки данных (loading), информацию о заказе (order), изображение для предпросмотра (preview) и ошибки формы заказа (formErrors). 
В классе AppState определены методы для работы с данными, такие как getTotal для подсчета общей суммы заказа, setCatalog для установки списка товаров в каталоге, setPreview для установки изображения для предпросмотра, getActiveLots  получения активных (тех, что в корзине) товаров, а также методы для добавления и удаления товаров из заказа, валидации адреса и контактной информации в заказе, очистки заказа.
```
```
Класс AuctionAPI является расширением класса Api и реализует методы для взаимодействия с API, такие как получение информации о товаре (getLotItem), списка товаров getLotList(), оформление заказа getLotList().
```
```
Класс Card<T> является базовым классом для карточки товара и содержит основные свойства и методы для работы с ней. В конструкторе этого класса инициализируются элементы карточки (заголовок, цена, кнопка) и устанавливаются обработчики событий для кнопки (если они переданы). Также в этом классе определены геттеры и сеттеры для установки и получения значений заголовка, цены и статуса кнопки.</ br>
Класс CardPreview<T> является расширением класса Card и служит отоюражения карточки на главном экране ларька. Добавляет возможность отображения дополнительных свойств карточки, таких как изображение, описание и категория товара. В конструкторе этого класса инициализируются элементы для отображения изображения, описания и категории товара. Также в этом классе определены методы для установки значений категории, изображения и описания товара. </ br>
Класс CardBasket<T> также является расширением класса Card и предназначен для отображения карточек товаров в корзине. В данном классе определено свойство _index (и сеттер для него)  для отображения индекса (порядкового номера) товара в корзине.
```
```
Классы OrderAddress и OrderContacts представляют формы для заказа.
OrderAddress отвечает за ввод адреса доставки и выбор способа оплаты (онлайн или офлайн). Он содержит методы для обработки ввода пользователем и передачи соответствующих событий. При сабмите происходит эмитируется событие еmit(`orderAddress:submit`), которое открывает форму с заполнениями контактов
OrderContacts отвечает за ввод контактной информации пользователя (имейл и телефон). При сабмите  эмитируется событие еmit(`orderContacts:submit`), которое открывает форму с заполнениями контактов
Обе формы наследуют от класса Form, который предположительно содержит общую логику для работы с формами, такую как инициализация, обработка событий и т. д.
Методы onInputChange в каждом классе добавляют в массив объектов коотетсвующие поля (адрес, метод оплаты, мейл и телефон)
```
```
Класс Page представляет страницу приложения и управляет её состоянием и отображением.
В конструкторе класса происходит инициализация основных элементов страницы, таких как счетчик товаров в корзине (counter), каталог товаров (catalog), контейнер страницы (wrapper) и корзина (basket). Также добавляется слушатель события клика на элемент корзины для открытия корзины.
Класс содержит три setter метода для обновления различных частей страницы:
Сеттеры
 • counter - обновляет счётчик товаров в корзине.
 • catalog - обновляет каталог товаров на странице.
 • locked - блокирует или разблокирует страницу (например, при выполнении асинхронных операций).
```



